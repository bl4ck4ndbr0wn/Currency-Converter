!function i(a,c,s){function u(t,e){if(!c[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};a[t][0].call(o.exports,function(e){return u(a[t][1][e]||e)},o,o.exports,i,a,c,s)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiURI="https://free.currencyconverterapi.com/api/v5"}return r(e,[{key:"logError",value:function(e){console.log("Looks like there was a problem: \n",e)}},{key:"validateResponse",value:function(e){if(!e.ok)throw Error(e.statusText);return e}},{key:"readResponseAsJSON",value:function(e){return e.json()}},{key:"get",value:function(e){var t=""+this.apiURI+e;return fetch(t).then(this.validateResponse).then(this.readResponseAsJSON).catch(this.logError)}}]),e}());n.default=o},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();n.Component=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setState=this.setState.bind(this)}return r(e,[{key:"setState",value:function(e){return Object.assign(this.state,e)}}]),e}()},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},i=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./../components/app"),c=e("./../api"),s=(r=c)&&r.__esModule?r:{default:r};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={currencies:{}},e.indexDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,e.DB_NAME="CConverter",e.DB_VERSION=1,e.DB_STORE_NAME="CConverter",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),i(t,[{key:"openDatabase",value:function(){var n=this;if(console.log("openDatabase"),!navigator.serviceWorker)return Promise.resolve();this.indexDB||window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");var e=this.indexDB.open(this.DB_NAME,this.DB_VERSION);console.log(e),e.then(function(e){var t=getObjectStore(n.dbName,"readwrite");s.default.get("/currencies").then(function(e){Object.entries(result.results).map(function(e){n.setState({currencies:o({},e[1])}),n.onChange(t)})})}).then(function(){console.log("added item to the store os!")}),e.onupgradeneeded(function(e){console.log("dbPromise.onupgradeneeded"),e.currentTarget.result.createObjectStore(n.DB_STORE_NAME,{keyPath:"id"}).createIndex("currency","countries")})}},{key:"onChange",value:function(e){var t=o({},this.state.currencies);return e.add(t),tx.complete}},{key:"getObjectStore",value:function(e,t){return db.transaction(e,t).objectStore(e)}},{key:"clearObjectStore",value:function(e){var t=this,n=getObjectStore(this.DB_STORE_NAME,"readwrite"),r=n.clear();r.onsuccess=function(e){displayActionSuccess("Store cleared"),displayCurrList(n)},r.onerror=function(e){console.error("clearObjectStore:",e.target.errorCode),displayActionFailure(t.error)}}},{key:"getBlob",value:function(e,t,n){t.get(e).onsuccess=function(e){var t=e.target.result;t&&n(t.blob)}}},{key:"_showCachedCurrencies",value:function(){return console.log("[Service Worker] showing cached images"),this.openDatabase()}}]),t}();n.default=u},{"./../api":1,"./../components/app":2}],4:[function(e,t,n){"use strict";var r,o=e("./../idb"),i=(r=o)&&r.__esModule?r:{default:r};var a=function(e){e.addEventListener("statechange",function(){"installed"==e.state&&c(e)})},c=function(e){document.getElementById("notification").className="show",document.getElementById("reload").addEventListener("click",function(){e.postMessage({action:"skipWaiting"})})};!function(){if("serviceWorker"in navigator){navigator.serviceWorker.register("./../sw.js").then(function(e){console.log("Service Worker Registered on scope "+e.scope),navigator.serviceWorker.controller&&(e.waiting?c(e.waiting):e.installing?a(e.installing):e.addEventListener("updatefound",function(){a(e.installing)}))});var e=void 0;navigator.serviceWorker.addEventListener("controllerchange",function(){e||(window.location.reload(),e=!0)})}else console.log("Service Worker is not supported by browser.")}(),(new i.default).openDatabase()},{"./../idb":3}]},{},[4]);
//# sourceMappingURL=maps/indexController.js.map
