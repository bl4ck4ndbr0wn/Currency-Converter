!function i(a,c,s){function u(t,e){if(!c[t]){if(!a[t]){var n="function"==typeof require&&require;if(!e&&n)return n(t,!0);if(l)return l(t,!0);var r=new Error("Cannot find module '"+t+"'");throw r.code="MODULE_NOT_FOUND",r}var o=c[t]={exports:{}};a[t][0].call(o.exports,function(e){return u(a[t][1][e]||e)},o,o.exports,i,a,c,s)}return c[t].exports}for(var l="function"==typeof require&&require,e=0;e<s.length;e++)u(s[e]);return u}({1:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();var o=new(function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.apiURI="https://free.currencyconverterapi.com/api/v5"}return r(e,[{key:"logError",value:function(e){console.log("Looks like there was a problem: \n",e)}},{key:"validateResponse",value:function(e){if(!e.ok)throw Error(e.statusText);return e}},{key:"readResponseAsJSON",value:function(e){return e.json()}},{key:"get",value:function(e){var t=""+this.apiURI+e;return fetch(t).then(this.validateResponse).then(this.readResponseAsJSON).catch(this.logError)}}]),e}());n.default=o},{}],2:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}();n.Component=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.setState=this.setState.bind(this)}return r(e,[{key:"setState",value:function(e){return Object.assign(this.state,e)}}]),e}()},{}],3:[function(e,t,n){"use strict";Object.defineProperty(n,"__esModule",{value:!0});var r,i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},o=function(){function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),e}}(),a=e("./../components/app"),c=e("./../api"),s=(r=c)&&r.__esModule?r:{default:r};var u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._showCachedCurrencies=function(){return console.log("[Service Worker] showing cached images"),e.openDatabase()},e.state={currencies:{}},e.indexDB=window.indexedDB||window.mozIndexedDB||window.webkitIndexedDB||window.msIndexedDB,e.dbName="CConverter",e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a.Component),o(t,[{key:"openDatabase",value:function(){var o=this;if(!navigator.serviceWorker)return Promise.resolve();this.indexDB||window.alert("Your browser doesn't support a stable version of IndexedDB. Such and such feature will not be available.");var e=this.indexDB.open(this.dbName,2,function(e){upgradeDb.objectStoreNames.contains("currency")||upgradeDb.createObjectStore("currency",{keyPath:"id"}),upgradeDb.objectStoreNames.contains("countries")||upgradeDb.createObjectStore("countries",{keyPath:"id"}),objectStore.createIndex("currency","countries")});console.log(e),e.then(function(e){var t=e.transaction(o.dbName,"readwrite"),n=t.objectStore(o.store),r={id:1,name:"sandwichs",price:4.99,description:"A very tasty sandwich",created:(new Date).getTime()};return n.add(i({},r)),t.complete}).then(function(){console.log("added item to the store os!")})}},{key:"onChange",value:function(){var e=i({},this.state.currencies);store.put(e),console.log(e)}},{key:"putCurrencies",value:function(){var t=this,e=this.db.result,n=e.transaction(this.dbName,"readwrite");n.objectStore(this.dbName).index("currency");console.log("Adding currencies"),s.default.get("/currencies").then(function(e){Object.entries(result.results).map(function(e){t.setState({currencies:i({},e[1])}),t.onChange()})}),n.onComplete=function(){e.close()}}}]),t}();n.default=u},{"./../api":1,"./../components/app":2}],4:[function(e,t,n){"use strict";var r,o=e("./../idb"),i=(r=o)&&r.__esModule?r:{default:r};var a,c=function(e){e.addEventListener("statechange",function(){"installed"==e.state&&s(e)})},s=function(e){document.getElementById("notification").className="show",document.getElementById("reload").addEventListener("click",function(){e.postMessage({action:"skipWaiting"})})};a=new i.default,function(){if("serviceWorker"in navigator){navigator.serviceWorker.register("./../sw.js").then(function(e){console.log("Service Worker Registered on scope "+e.scope),navigator.serviceWorker.controller&&(e.waiting?s(e.waiting):e.installing?c(e.installing):e.addEventListener("updatefound",function(){c(e.installing)}))});var e=void 0;navigator.serviceWorker.addEventListener("controllerchange",function(){e||(window.location.reload(),e=!0)})}else console.log("Service Worker is not supported by browser.")}(),a._showCachedCurrencies()},{"./../idb":3}]},{},[4]);
//# sourceMappingURL=maps/indexController.js.map
