{"version":3,"sources":["indexController.js"],"names":["r","e","n","t","o","i","f","c","require","u","a","Error","code","p","exports","call","length","1","module","idb","window","indexedDB","mozIndexedDB","_trackInstalling","worker","addEventListener","state","_updateReady","document","getElementById","className","postMessage","action","navigator","serviceWorker","register","then","reg","console","log","scope","controller","waiting","installing","refreshing","location","reload","registerServiceWorker","open","upgradeDB","createObjectStore","keyPath","createIndex","Promise","resolve"],"mappings":"CAAY,SAASA,EAAEC,EAAEC,EAAEC,GAAG,SAASC,EAAEC,EAAEC,GAAG,IAAIJ,EAAEG,GAAG,CAAC,IAAIJ,EAAEI,GAAG,CAAC,IAAIE,EAAE,mBAAmBC,SAASA,QAAQ,IAAIF,GAAGC,EAAE,OAAOA,EAAEF,GAAE,GAAI,GAAGI,EAAE,OAAOA,EAAEJ,GAAE,GAAI,IAAIK,EAAE,IAAIC,MAAM,uBAAuBN,EAAE,KAAK,MAAMK,EAAEE,KAAK,mBAAmBF,EAAE,IAAIG,EAAEX,EAAEG,GAAG,CAACS,QAAQ,IAAIb,EAAEI,GAAG,GAAGU,KAAKF,EAAEC,QAAQ,SAASd,GAAoB,OAAOI,EAAlBH,EAAEI,GAAG,GAAGL,IAAeA,IAAIa,EAAEA,EAAEC,QAAQd,EAAEC,EAAEC,EAAEC,GAAG,OAAOD,EAAEG,GAAGS,QAAQ,IAAI,IAAIL,EAAE,mBAAmBD,SAASA,QAAQH,EAAE,EAAEA,EAAEF,EAAEa,OAAOX,IAAID,EAAED,EAAEE,IAAI,OAAOD,EAA7b,CAA4c,CAACa,EAAE,CAAC,SAAST,EAAQU,EAAOJ,GACxe,aAGA,IAAIK,EAAMC,OAAOC,WAAaD,OAAOE,aAcrC,IAkCIC,EAAmB,SAA0BC,GAC/CA,EAAOC,iBAAiB,cAAe,WACjB,aAAhBD,EAAOE,OACTC,EAAaH,MAKfG,EAAe,SAAsBH,GAEpBI,SAASC,eAAe,gBAC9BC,UAAY,OAEzBF,SAASC,eAAe,UAAUJ,iBAAiB,QAAS,WAC1DD,EAAOO,YAAY,CAAEC,OAAQ,oBAhDL,WAC1B,GAAI,kBAAmBC,UAAW,CAChCA,UAAUC,cAAcC,SAAS,cAAcC,KAAK,SAAUC,GAC5DC,QAAQC,IAAI,sCAAwCF,EAAIG,OACnDP,UAAUC,cAAcO,aAIzBJ,EAAIK,QACNf,EAAaU,EAAIK,SAIfL,EAAIM,WACNpB,EAAiBc,EAAIM,YAIvBN,EAAIZ,iBAAiB,cAAe,WAClCF,EAAiBc,EAAIM,iBAIzB,IAAIC,OAAa,EACjBX,UAAUC,cAAcT,iBAAiB,mBAAoB,WACvDmB,IACJxB,OAAOyB,SAASC,SAChBF,GAAa,UAGfN,QAAQC,IAAI,+CAsBhBQ,GA/DOd,UAAUC,cAGRf,EAAI6B,KAAK,aAAc,EAAG,SAAUC,GAC7BA,EAAUC,kBAAkB,aAAc,CACpDC,QAAS,OAELC,YAAY,WAAY,eANvBC,QAAQC,WAiEjB,KAAK,GAAG,CAAC","file":"../indexController.js","sourcesContent":["(function(){function r(e,n,t){function o(i,f){if(!n[i]){if(!e[i]){var c=\"function\"==typeof require&&require;if(!f&&c)return c(i,!0);if(u)return u(i,!0);var a=new Error(\"Cannot find module '\"+i+\"'\");throw a.code=\"MODULE_NOT_FOUND\",a}var p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u=\"function\"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r})()({1:[function(require,module,exports){\n\"use strict\";\n\n// import api from \"./../api\";\nvar idb = window.indexedDB || window.mozIndexedDB;\n\nfunction openDatabase() {\n  if (!navigator.serviceWorker) {\n    return Promise.resolve();\n  }\n  return idb.open(\"CConverter\", 1, function (upgradeDB) {\n    var store = upgradeDB.createObjectStore(\"CConverter\", {\n      keyPath: \"id\"\n    });\n    store.createIndex(\"currency\", \"countries\");\n  });\n}\n\nvar registerServiceWorker = function registerServiceWorker() {\n  if (\"serviceWorker\" in navigator) {\n    navigator.serviceWorker.register(\"./../sw.js\").then(function (reg) {\n      console.log(\"Service Worker Registered on scope \" + reg.scope);\n      if (!navigator.serviceWorker.controller) {\n        return;\n      }\n\n      if (reg.waiting) {\n        _updateReady(reg.waiting);\n        return;\n      }\n\n      if (reg.installing) {\n        _trackInstalling(reg.installing);\n        return;\n      }\n\n      reg.addEventListener(\"updatefound\", function () {\n        _trackInstalling(reg.installing);\n      });\n    });\n\n    var refreshing = void 0;\n    navigator.serviceWorker.addEventListener(\"controllerchange\", function () {\n      if (refreshing) return;\n      window.location.reload();\n      refreshing = true;\n    });\n  } else {\n    console.log(\"Service Worker is not supported by browser.\");\n  }\n};\n\nvar _trackInstalling = function _trackInstalling(worker) {\n  worker.addEventListener(\"statechange\", function () {\n    if (worker.state == \"installed\") {\n      _updateReady(worker);\n    }\n  });\n};\n\nvar _updateReady = function _updateReady(worker) {\n  var newWorker = void 0;\n  var notification = document.getElementById(\"notification\");\n  notification.className = \"show\";\n  // The click event on the pop up notification\n  document.getElementById(\"reload\").addEventListener(\"click\", function () {\n    worker.postMessage({ action: \"skipWaiting\" });\n  });\n};\n\nregisterServiceWorker();\nopenDatabase();\n\n},{}]},{},[1])\n//# sourceMappingURL=data:application/json;charset=utf-8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbIm5vZGVfbW9kdWxlcy9icm93c2VyLXBhY2svX3ByZWx1ZGUuanMiLCJzcmMvanMvbWFpbi9pbmRleENvbnRyb2xsZXIuanMiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUE7OztBQ0FBO0FBQ0EsSUFBTSxNQUFNLE9BQU8sU0FBUCxJQUFvQixPQUFPLFlBQXZDOztBQUVBLFNBQVMsWUFBVCxHQUF3QjtBQUN0QixNQUFJLENBQUMsVUFBVSxhQUFmLEVBQThCO0FBQzVCLFdBQU8sUUFBUSxPQUFSLEVBQVA7QUFDRDtBQUNELFNBQU8sSUFBSSxJQUFKLENBQVMsWUFBVCxFQUF1QixDQUF2QixFQUEwQixxQkFBYTtBQUM1QyxRQUFNLFFBQVEsVUFBVSxpQkFBVixDQUE0QixZQUE1QixFQUEwQztBQUN0RCxlQUFTO0FBRDZDLEtBQTFDLENBQWQ7QUFHQSxVQUFNLFdBQU4sQ0FBa0IsVUFBbEIsRUFBOEIsV0FBOUI7QUFDRCxHQUxNLENBQVA7QUFNRDs7QUFFRCxJQUFNLHdCQUF3QixTQUF4QixxQkFBd0IsR0FBTTtBQUNsQyxNQUFJLG1CQUFtQixTQUF2QixFQUFrQztBQUNoQyxjQUFVLGFBQVYsQ0FBd0IsUUFBeEIsQ0FBaUMsWUFBakMsRUFBK0MsSUFBL0MsQ0FBb0QsZUFBTztBQUN6RCxjQUFRLEdBQVIseUNBQWtELElBQUksS0FBdEQ7QUFDQSxVQUFJLENBQUMsVUFBVSxhQUFWLENBQXdCLFVBQTdCLEVBQXlDO0FBQ3ZDO0FBQ0Q7O0FBRUQsVUFBSSxJQUFJLE9BQVIsRUFBaUI7QUFDZixxQkFBYSxJQUFJLE9BQWpCO0FBQ0E7QUFDRDs7QUFFRCxVQUFJLElBQUksVUFBUixFQUFvQjtBQUNsQix5QkFBaUIsSUFBSSxVQUFyQjtBQUNBO0FBQ0Q7O0FBRUQsVUFBSSxnQkFBSixDQUFxQixhQUFyQixFQUFvQyxZQUFXO0FBQzdDLHlCQUFpQixJQUFJLFVBQXJCO0FBQ0QsT0FGRDtBQUdELEtBbkJEOztBQXFCQSxRQUFJLG1CQUFKO0FBQ0EsY0FBVSxhQUFWLENBQXdCLGdCQUF4QixDQUF5QyxrQkFBekMsRUFBNkQsWUFBTTtBQUNqRSxVQUFJLFVBQUosRUFBZ0I7QUFDaEIsYUFBTyxRQUFQLENBQWdCLE1BQWhCO0FBQ0EsbUJBQWEsSUFBYjtBQUNELEtBSkQ7QUFLRCxHQTVCRCxNQTRCTztBQUNMLFlBQVEsR0FBUixDQUFZLDZDQUFaO0FBQ0Q7QUFDRixDQWhDRDs7QUFrQ0EsSUFBTSxtQkFBbUIsU0FBbkIsZ0JBQW1CLFNBQVU7QUFDakMsU0FBTyxnQkFBUCxDQUF3QixhQUF4QixFQUF1QyxZQUFNO0FBQzNDLFFBQUksT0FBTyxLQUFQLElBQWdCLFdBQXBCLEVBQWlDO0FBQy9CLG1CQUFhLE1BQWI7QUFDRDtBQUNGLEdBSkQ7QUFLRCxDQU5EOztBQVFBLElBQU0sZUFBZSxTQUFmLFlBQWUsU0FBVTtBQUM3QixNQUFJLGtCQUFKO0FBQ0EsTUFBTSxlQUFlLFNBQVMsY0FBVCxDQUF3QixjQUF4QixDQUFyQjtBQUNBLGVBQWEsU0FBYixHQUF5QixNQUF6QjtBQUNBO0FBQ0EsV0FBUyxjQUFULENBQXdCLFFBQXhCLEVBQWtDLGdCQUFsQyxDQUFtRCxPQUFuRCxFQUE0RCxZQUFNO0FBQ2hFLFdBQU8sV0FBUCxDQUFtQixFQUFFLFFBQVEsYUFBVixFQUFuQjtBQUNELEdBRkQ7QUFHRCxDQVJEOztBQVVBO0FBQ0EiLCJmaWxlIjoiZ2VuZXJhdGVkLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigpe2Z1bmN0aW9uIHIoZSxuLHQpe2Z1bmN0aW9uIG8oaSxmKXtpZighbltpXSl7aWYoIWVbaV0pe3ZhciBjPVwiZnVuY3Rpb25cIj09dHlwZW9mIHJlcXVpcmUmJnJlcXVpcmU7aWYoIWYmJmMpcmV0dXJuIGMoaSwhMCk7aWYodSlyZXR1cm4gdShpLCEwKTt2YXIgYT1uZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK2krXCInXCIpO3Rocm93IGEuY29kZT1cIk1PRFVMRV9OT1RfRk9VTkRcIixhfXZhciBwPW5baV09e2V4cG9ydHM6e319O2VbaV1bMF0uY2FsbChwLmV4cG9ydHMsZnVuY3Rpb24ocil7dmFyIG49ZVtpXVsxXVtyXTtyZXR1cm4gbyhufHxyKX0scCxwLmV4cG9ydHMscixlLG4sdCl9cmV0dXJuIG5baV0uZXhwb3J0c31mb3IodmFyIHU9XCJmdW5jdGlvblwiPT10eXBlb2YgcmVxdWlyZSYmcmVxdWlyZSxpPTA7aTx0Lmxlbmd0aDtpKyspbyh0W2ldKTtyZXR1cm4gb31yZXR1cm4gcn0pKCkiLCIvLyBpbXBvcnQgYXBpIGZyb20gXCIuLy4uL2FwaVwiO1xuY29uc3QgaWRiID0gd2luZG93LmluZGV4ZWREQiB8fCB3aW5kb3cubW96SW5kZXhlZERCO1xuXG5mdW5jdGlvbiBvcGVuRGF0YWJhc2UoKSB7XG4gIGlmICghbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIpIHtcbiAgICByZXR1cm4gUHJvbWlzZS5yZXNvbHZlKCk7XG4gIH1cbiAgcmV0dXJuIGlkYi5vcGVuKFwiQ0NvbnZlcnRlclwiLCAxLCB1cGdyYWRlREIgPT4ge1xuICAgIGNvbnN0IHN0b3JlID0gdXBncmFkZURCLmNyZWF0ZU9iamVjdFN0b3JlKFwiQ0NvbnZlcnRlclwiLCB7XG4gICAgICBrZXlQYXRoOiBcImlkXCJcbiAgICB9KTtcbiAgICBzdG9yZS5jcmVhdGVJbmRleChcImN1cnJlbmN5XCIsIFwiY291bnRyaWVzXCIpO1xuICB9KTtcbn1cblxuY29uc3QgcmVnaXN0ZXJTZXJ2aWNlV29ya2VyID0gKCkgPT4ge1xuICBpZiAoXCJzZXJ2aWNlV29ya2VyXCIgaW4gbmF2aWdhdG9yKSB7XG4gICAgbmF2aWdhdG9yLnNlcnZpY2VXb3JrZXIucmVnaXN0ZXIoXCIuLy4uL3N3LmpzXCIpLnRoZW4ocmVnID0+IHtcbiAgICAgIGNvbnNvbGUubG9nKGBTZXJ2aWNlIFdvcmtlciBSZWdpc3RlcmVkIG9uIHNjb3BlICR7cmVnLnNjb3BlfWApO1xuICAgICAgaWYgKCFuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5jb250cm9sbGVyKSB7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlZy53YWl0aW5nKSB7XG4gICAgICAgIF91cGRhdGVSZWFkeShyZWcud2FpdGluZyk7XG4gICAgICAgIHJldHVybjtcbiAgICAgIH1cblxuICAgICAgaWYgKHJlZy5pbnN0YWxsaW5nKSB7XG4gICAgICAgIF90cmFja0luc3RhbGxpbmcocmVnLmluc3RhbGxpbmcpO1xuICAgICAgICByZXR1cm47XG4gICAgICB9XG5cbiAgICAgIHJlZy5hZGRFdmVudExpc3RlbmVyKFwidXBkYXRlZm91bmRcIiwgZnVuY3Rpb24oKSB7XG4gICAgICAgIF90cmFja0luc3RhbGxpbmcocmVnLmluc3RhbGxpbmcpO1xuICAgICAgfSk7XG4gICAgfSk7XG5cbiAgICBsZXQgcmVmcmVzaGluZztcbiAgICBuYXZpZ2F0b3Iuc2VydmljZVdvcmtlci5hZGRFdmVudExpc3RlbmVyKFwiY29udHJvbGxlcmNoYW5nZVwiLCAoKSA9PiB7XG4gICAgICBpZiAocmVmcmVzaGluZykgcmV0dXJuO1xuICAgICAgd2luZG93LmxvY2F0aW9uLnJlbG9hZCgpO1xuICAgICAgcmVmcmVzaGluZyA9IHRydWU7XG4gICAgfSk7XG4gIH0gZWxzZSB7XG4gICAgY29uc29sZS5sb2coXCJTZXJ2aWNlIFdvcmtlciBpcyBub3Qgc3VwcG9ydGVkIGJ5IGJyb3dzZXIuXCIpO1xuICB9XG59O1xuXG5jb25zdCBfdHJhY2tJbnN0YWxsaW5nID0gd29ya2VyID0+IHtcbiAgd29ya2VyLmFkZEV2ZW50TGlzdGVuZXIoXCJzdGF0ZWNoYW5nZVwiLCAoKSA9PiB7XG4gICAgaWYgKHdvcmtlci5zdGF0ZSA9PSBcImluc3RhbGxlZFwiKSB7XG4gICAgICBfdXBkYXRlUmVhZHkod29ya2VyKTtcbiAgICB9XG4gIH0pO1xufTtcblxuY29uc3QgX3VwZGF0ZVJlYWR5ID0gd29ya2VyID0+IHtcbiAgbGV0IG5ld1dvcmtlcjtcbiAgY29uc3Qgbm90aWZpY2F0aW9uID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJub3RpZmljYXRpb25cIik7XG4gIG5vdGlmaWNhdGlvbi5jbGFzc05hbWUgPSBcInNob3dcIjtcbiAgLy8gVGhlIGNsaWNrIGV2ZW50IG9uIHRoZSBwb3AgdXAgbm90aWZpY2F0aW9uXG4gIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwicmVsb2FkXCIpLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgd29ya2VyLnBvc3RNZXNzYWdlKHsgYWN0aW9uOiBcInNraXBXYWl0aW5nXCIgfSk7XG4gIH0pO1xufTtcblxucmVnaXN0ZXJTZXJ2aWNlV29ya2VyKCk7XG5vcGVuRGF0YWJhc2UoKTtcbiJdfQ==\n"]}